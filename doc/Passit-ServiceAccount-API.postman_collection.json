{
	"info": {
		"_postman_id": "passit-service-account-001",
		"name": "Passit Service Account API",
		"description": "사용자 관리 & 인증 API - 회원가입, 로그인, 이메일 인증, 마이페이지, 관리자 기능",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "AUTH - 인증",
			"item": [
				{
					"name": "1. 회원가입",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"userEmail\", jsonData.data.email);",
									"    pm.environment.set(\"userId\", jsonData.data.userId);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password123\",\n  \"name\": \"홍길동\",\n  \"nickname\": \"길동이\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/signup",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "signup"]
						},
						"description": "새로운 사용자를 등록합니다. 이메일 인증 코드가 자동으로 전송됩니다."
					},
					"response": []
				},
				{
					"name": "2. 로그인",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"accessToken\", jsonData.data.accessToken);",
									"    pm.environment.set(\"refreshToken\", jsonData.data.refreshToken);",
									"    pm.environment.set(\"userId\", jsonData.data.userId);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{userEmail}}\",\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "login"]
						},
						"description": "이메일과 비밀번호로 로그인합니다. JWT 토큰이 발급됩니다."
					},
					"response": []
				},
				{
					"name": "3. 토큰 갱신",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"accessToken\", jsonData.data.accessToken);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"refreshToken\": \"{{refreshToken}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/refresh",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "refresh"]
						},
						"description": "Refresh Token으로 새로운 Access Token을 발급받습니다."
					},
					"response": []
				},
				{
					"name": "4. 로그아웃",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{accessToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/auth/logout",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "logout"]
						},
						"description": "로그아웃합니다. Refresh Token이 무효화됩니다."
					},
					"response": []
				},
				{
					"name": "5. 카카오 로그인 시작",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/auth/kakao",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "kakao"]
						},
						"description": "카카오 로그인 페이지로 리다이렉트합니다. 브라우저에서 이 URL을 열면 카카오 OAuth 페이지로 이동합니다."
					},
					"response": []
				},
				{
					"name": "6. 카카오 로그인 콜백",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/auth/kakao/callback?code=sample_authorization_code",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "kakao", "callback"],
							"query": [
								{
									"key": "code",
									"value": "sample_authorization_code",
									"description": "카카오에서 발급받은 인증 코드"
								}
							]
						},
						"description": "카카오 OAuth 인증 후 콜백을 처리합니다. 실제로는 카카오에서 자동으로 리다이렉트되며, 성공시 프론트엔드로 토큰과 함께 리다이렉트됩니다."
					},
					"response": []
				}
			]
		},
		{
			"name": "AUTH - 이메일 인증 (회원가입용)",
			"item": [
				{
					"name": "이메일 인증 코드 전송",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{userEmail}}\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/send-verification-code",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "send-verification-code"]
						},
						"description": "이메일 인증 코드를 전송합니다. 로컬 환경에서는 콘솔에 출력됩니다."
					},
					"response": []
				},
				{
					"name": "이메일 인증 코드 확인",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"{{userEmail}}\",\n  \"code\": \"123456\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/auth/verify-email",
							"host": ["{{baseUrl}}"],
							"path": ["api", "auth", "verify-email"]
						},
						"description": "이메일 인증 코드를 확인합니다. 6자리 코드를 입력하세요."
					},
					"response": []
				}
			]
		},
		{
			"name": "MY PAGE - 마이페이지 (사용자 본인)",
			"item": [
				{
					"name": "내 정보 조회",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users/me",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "me"]
						},
						"description": "현재 로그인한 사용자의 정보를 조회합니다."
					},
					"response": []
				},
				{
					"name": "내 정보 수정",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"홍길동\",\n  \"nickname\": \"길동왕\",\n  \"phone\": \"010-1234-5678\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/users/me",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "me"]
						},
						"description": "현재 로그인한 사용자의 정보를 수정합니다."
					},
					"response": []
				},
				{
					"name": "비밀번호 확인",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/users/me/verify-password",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "me", "verify-password"]
						},
						"description": "회원정보 수정 전 비밀번호를 확인합니다."
					},
					"response": []
				},
				{
					"name": "비밀번호 변경",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"oldPassword\": \"password123\",\n  \"newPassword\": \"newPassword123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/users/me/password",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "me", "password"]
						},
						"description": "현재 비밀번호를 새 비밀번호로 변경합니다."
					},
					"response": []
				},
				{
					"name": "내 계정 삭제 (탈퇴)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users/me",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "me"]
						},
						"description": "현재 로그인한 사용자의 계정을 삭제(탈퇴)합니다."
					},
					"response": []
				}
			]
		},
		{
			"name": "ADMIN - 관리자 (사용자 생성)",
			"item": [
				{
					"name": "사용자 생성 (관리자용)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"newuser@example.com\",\n  \"password\": \"password123\",\n  \"name\": \"신규사용자\",\n  \"nickname\": \"신규\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/users",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users"]
						},
						"description": "관리자가 직접 사용자를 생성합니다. 이메일 인증 없이 즉시 생성됩니다."
					},
					"response": []
				}
			]
		},
		{
			"name": "ADMIN - 관리자 (사용자 조회)",
			"item": [
				{
					"name": "전체 사용자 검색 (페이지네이션)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users/search?page=0&size=10&sortBy=createdAt&sortDirection=DESC",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "search"],
							"query": [
								{
									"key": "page",
									"value": "0",
									"description": "페이지 번호 (0부터 시작)"
								},
								{
									"key": "size",
									"value": "10",
									"description": "페이지 크기"
								},
								{
									"key": "sortBy",
									"value": "createdAt",
									"description": "정렬 기준 (createdAt, userId, name, email)"
								},
								{
									"key": "sortDirection",
									"value": "DESC",
									"description": "정렬 방향 (ASC/DESC)"
								}
							]
						},
						"description": "전체 사용자를 페이지네이션으로 조회합니다. (관리자 제외)"
					},
					"response": []
				},
				{
					"name": "키워드로 사용자 검색",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users/search?keyword=홍길동&page=0&size=10",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "search"],
							"query": [
								{
									"key": "keyword",
									"value": "홍길동",
									"description": "검색어 (이름, 이메일, 닉네임)"
								},
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "10"
								}
							]
						},
						"description": "이름, 이메일, 닉네임으로 사용자를 검색합니다."
					},
					"response": []
				},
				{
					"name": "상태별 + 키워드 검색",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users/search?keyword=test&status=ACTIVE&page=0&size=10",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "search"],
							"query": [
								{
									"key": "keyword",
									"value": "test",
									"description": "검색어"
								},
								{
									"key": "status",
									"value": "ACTIVE",
									"description": "상태 (ACTIVE, SUSPENDED, DELETED)"
								},
								{
									"key": "page",
									"value": "0"
								},
								{
									"key": "size",
									"value": "10"
								}
							]
						},
						"description": "특정 상태의 사용자를 키워드로 검색합니다."
					},
					"response": []
				},
				{
					"name": "사용자 ID로 조회",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users/{{userId}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "{{userId}}"]
						},
						"description": "특정 사용자를 ID로 조회합니다."
					},
					"response": []
				},
				{
					"name": "이메일로 사용자 조회",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users/email/{{userEmail}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "email", "{{userEmail}}"]
						},
						"description": "이메일로 사용자를 조회합니다."
					},
					"response": []
				},
				{
					"name": "전체 사용자 조회",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users"]
						},
						"description": "모든 사용자를 조회합니다."
					},
					"response": []
				},
				{
					"name": "활성 사용자 조회",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users/status/ACTIVE",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "status", "ACTIVE"]
						},
						"description": "활성 상태의 사용자만 조회합니다."
					},
					"response": []
				},
				{
					"name": "삭제된 사용자 조회",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users/status/DELETED",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "status", "DELETED"]
						},
						"description": "삭제된 사용자를 조회합니다."
					},
					"response": []
				},
				{
					"name": "정지된 사용자 조회",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users/status/SUSPENDED",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "status", "SUSPENDED"]
						},
						"description": "정지된 사용자를 조회합니다."
					},
					"response": []
				}
			]
		},
		{
			"name": "ADMIN - 관리자 (사용자 수정)",
			"item": [
				{
					"name": "사용자 정보 수정",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"김철수\",\n  \"nickname\": \"철수왕\",\n  \"phone\": \"010-9999-8888\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/users/{{userId}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "{{userId}}"]
						},
						"description": "사용자의 이름, 닉네임, 전화번호를 수정합니다."
					},
					"response": []
				},
				{
					"name": "사용자 권한 변경 (USER → ADMIN)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"role\": \"ADMIN\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/users/{{userId}}/role",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "{{userId}}", "role"]
						},
						"description": "사용자의 권한을 ADMIN으로 변경합니다."
					},
					"response": []
				},
				{
					"name": "사용자 권한 변경 (ADMIN → USER)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"role\": \"USER\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/users/{{userId}}/role",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "{{userId}}", "role"]
						},
						"description": "사용자의 권한을 USER로 변경합니다."
					},
					"response": []
				},
				{
					"name": "사용자 정지",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users/{{userId}}/suspend",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "{{userId}}", "suspend"]
						},
						"description": "사용자를 정지 상태로 변경합니다."
					},
					"response": []
				},
				{
					"name": "사용자 활성화 (재활성화)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users/{{userId}}/activate",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "{{userId}}", "activate"]
						},
						"description": "삭제되거나 정지된 사용자를 활성화 상태로 복구합니다."
					},
					"response": []
				}
			]
		},
		{
			"name": "ADMIN - 관리자 (사용자 삭제)",
			"item": [
				{
					"name": "사용자 소프트 삭제",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users/{{userId}}",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "{{userId}}"]
						},
						"description": "사용자를 소프트 삭제합니다 (status=DELETED, deletedAt 기록). 나중에 복구 가능합니다."
					},
					"response": []
				},
				{
					"name": "사용자 하드 삭제 (영구 삭제)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{accessToken}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/users/{{userId}}/hard",
							"host": ["{{baseUrl}}"],
							"path": ["api", "users", "{{userId}}", "hard"]
						},
						"description": "⚠️ 사용자를 DB에서 완전히 삭제합니다. 복구 불가능합니다!"
					},
					"response": []
				}
			]
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{accessToken}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [""]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [""]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:8081",
			"type": "string"
		},
		{
			"key": "userEmail",
			"value": "test@example.com",
			"type": "string"
		},
		{
			"key": "userId",
			"value": "1",
			"type": "string"
		},
		{
			"key": "accessToken",
			"value": "",
			"type": "string"
		},
		{
			"key": "refreshToken",
			"value": "",
			"type": "string"
		}
	]
}
